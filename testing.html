

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Testing your integration &mdash; Amazon Pay for Magento 2 documentation</title>
  

  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Amazon Pay for Magento 2 documentation" href="index.html"/>
        <link rel="next" title="Troubleshooting" href="troubleshooting.html"/>
        <link rel="prev" title="Frontend Customisation" href="customisation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Amazon Pay for Magento 2
          

          
          </a>
     


          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="login.html">Amazon Sign-in</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Order &amp; payment workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="customisation.html">Frontend Customisation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing your integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-create-sandbox-test-account">How to create a Sandbox test account</a></li>
<li class="toctree-l2"><a class="reference internal" href="#available-simulations">Available Simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#no-simulation">No Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authorization-soft-decline">Authorization soft decline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authorization-hard-decline">Authorization hard decline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authorization-timed-out">Authorization timed out</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capture-declined">Capture declined</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capture-pending">Capture pending</a></li>
<li class="toctree-l3"><a class="reference internal" href="#refund-declined">Refund declined</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="m1_m2_migration.html">Migration: Magento 1 to Magento 2</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Amazon Pay for Magento 2</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Testing your integration</li>
      <li class="wy-breadcrumbs-aside">   
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="testing-your-integration">
<h1>Testing your integration<a class="headerlink" href="#testing-your-integration" title="Permalink to this headline">¶</a></h1>
<p>After a successful configuration, you should test your installation. Only after successfully testing in the Sandbox mode you should switch to the Live environment and make the button visible for all your customers.</p>
<p>These tests should cover the different workflows that you encounter while processing orders. Include the standard process like receiving an order, invoicing, shipment and alternative processes like refunding orders. Verify that all objects in your Magento admin are in the expected status and you correctly received all order information including the shipping address, contact details and the billing address (if applicable).</p>
<p>Next you should test also declines. You can use the test payment methods provided in Sandbox mode to simulate transaction declines. After your testing, verify the log files to make sure no exceptions have occurred.</p>
<div class="admonition note">
  <p class="first admonition-title">Note</p>
  <p class="last">PSD2 Handling and Automatic Decline Handling are not testable in Sandbox mode. Your website will always receive the final result of the transaction if <cite>Authorization mode</cite> is set to <cite>Immediate</cite>. If <cite>Authorization mode</cite> is set to <cite>Automatic</cite>, the final result of the transaction might come at a later time (always within 24 hours).</p>
  </div>
<div class="section" id="how-to-create-sandbox-test-account">
<h2>How to create a Sandbox test account<a class="headerlink" href="#how-to-create-sandbox-test-account" title="Permalink to this headline">¶</a></h2>
<p>To use the sandbox environment, you need to create specific test accounts for the sandbox environment.</p>
<ul class="simple">
<li>Login into <a target="_blank" class="reference external" href="https://sellercentral.amazon.com">Seller Central</a>.</li>
<li>Choose the menu <span class="menuselection">Integration ‣ Test accounts</span>.</li>
</ul>
<img alt="_images/testing_screenshot_1.png" src="_images/testing_screenshot_1.png" />
<ul class="simple">
<li>Click on <span class="guilabel">Create a new test account</span>.</li>
</ul>
<img alt="_images/testing_screenshot_2.png" src="_images/testing_screenshot_2.png" />
<ul class="simple">
<li>Fill in the form using a valid email address. The account can be used immediately after the account creation.</li>
</ul>
<img alt="_images/testing_screenshot_3.png" src="_images/testing_screenshot_3.png" />
<ul class="simple">
<li>Add other delivery addresses to the test account (optional).</li>
</ul>
<img alt="_images/testing_screenshot_4.png" src="_images/testing_screenshot_4.png" />
</div>
<div class="section" id="available-simulations">
<h2>Available Simulations<a class="headerlink" href="#available-simulations" title="Permalink to this headline">¶</a></h2>
<img alt="_images/test_cards.png" src="_images/test_cards.png" />
<div class="section" id="happy-flow">
<h3>1111, 0005, 4444, 54 - Immediate Happy Flow <a class="headerlink" href="#happy-flow" title="Permalink to this headline">¶</a></h3>
<p>With these test payment methods, the test transaction will be immediately successful (Happy Flow) and the buyer will be redirected to an order confirmation page.</p>
</div>
<div class="section" id="buyer-canceled">
<h3>3064 - BuyerCanceled<a class="headerlink" href="#buyer-canceled" title="Permalink to this headline">¶</a></h3>
<p>The payment authorization will immediately come back as declined due to a buyer action inside Amazon Pay hosted page. The buyer will be redirected to the initial step of the checkout and dedicated error message will be shown.</p>
</div>
<div class="section" id="authorization-hard-decline">
<h3>3434 - Declined<a class="headerlink" href="#authorization-hard-decline" title="Permalink to this headline">¶</a></h3>
<p>The payment authorization will immediately come back as declined due to a Payment Processor decline. The buyer will be redirected to the initial step of the checkout and dedicated error message will be shown.</p>
</div>
<div class="section" id="async-ok">
<h3>0701 - Pending then Success (Deferred Happy Flow) <a class="headerlink" href="#async-ok" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
  <p class="first admonition-title">Note</p>
  <p class="last">You need to test this payment method, in addition to the previous ones, only if <cite>Authorization Mode</cite> is set to <cite>Automatic</cite>.</p>
  </div>
<p>The payment authorization result will be pending during checkout. The buyer will be redirected to an order confirmation page, but the order status will be <cite>Payment Review</cite>. Order status will be updated asynchronously (via <cite>Polling</cite> or <cite>IPN</cite>) and will turn into <cite>Processing</cite>.</p>
</div>
<div class="section" id="async-ko">
  <h3>0701 - Pending then Declined (Deferred Decline) <a class="headerlink" href="#async-ko" title="Permalink to this headline">¶</a></h3>
  <div class="admonition note">
    <p class="first admonition-title">Note</p>
    <p class="last">You need to test this payment method, in addition to the previous ones, only if <cite>Authorization Mode</cite> is set to <cite>Automatic</cite>.</p>
    </div>
  <p>The payment authorization result will be pending during checkout. The buyer will be redirected to an order confirmation page, but the order status will be <cite>Payment Review</cite>. Order status will be updated asynchronously (via <cite>Polling</cite> or <cite>IPN</cite>) and will turn into <cite>Canceled</cite>.</p>
  </div>
<div class="section" id="capture-pending">
<h3>Capture Pending<a class="headerlink" href="#capture-pending" title="Permalink to this headline">¶</a></h3>
<p>You can simulate a Pending response returned for a Payment capture during invoice creation (only when <cite>Payment Action</cite> is set to <cite>Charge on Shipment</cite>). In order to do it, submit the following Invoice comment during invoice creation:
  <div class="highlight-xml"><div class="highlight"><pre>
    {
      "x-amz-pay-simulation-code": "CaptureInitiated"
    }
</pre></div>
</div>
  The created invoice will be Pending as well. Depending on your update strategy, <cite>Polling</cite> or <cite>IPN</cite> will update the invoice status accordingly at a later time.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="troubleshooting.html" class="btn btn-neutral float-right" title="Troubleshooting" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="customisation.html" class="btn btn-neutral" title="Frontend Customisation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Amazon.com Inc or its affiliates.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>


  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  

   

</body>
</html>